<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Short Code HTML JS by Long Orion</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400&display=swap');
    </style>
</head>

<body style="width: 1000px; margin: 20px auto; font-family: Roboto;">
    <table border="0" width="100%" style="background-color: antiquewhite; border-radius: 5px;">
        <tbody>
            <tr style="width: 100%; height: 25px;">
                <th style="width: 10%;">Full Code</th>
                <td style="width: 90%;">
                    <textarea id="input" rows="15" cols="86"></textarea>
                </td>
            </tr>
            <tr>
                <td colspan="2" style="text-align: center; width: 100%;">
                    <button style="width: fit-content; background-color: bisque;" onclick="shortHTML()">Short HTML / CSS</button>
                    <button style="width: fit-content; background-color: #fb06ff;" onclick="shortJS()">Short JS</button>
                    <button style="width: fit-content; background-color: #c07315;" onclick="shortCSS()">Short
                        CSS</button>

                    <button style="width: fit-content; background-color: bisque;" onclick="fullHTML()">Full HTML / CSS</button>
                    <button style="width: fit-content; background-color: #fb06ff;" onclick="fullJS()">Full JS</button>
                    <button style="width: fit-content; background-color: #c07315bb;" onclick="fullCSS()">Full
                        CSS</button>
                    <button style="width: fit-content;" onclick="location.reload();">Clear</button>
                </td>
            </tr>
            <tr style="width: 100%; height: 25px;">
                <th>Short HTML</th>
                <td>
                    <textarea id="output" rows="15" cols="86"></textarea>
                </td>
            </tr>
            <tr>
                <td colspan="2" style="text-align: center;">
                    <p id="lblKQ" style="font-weight: 600; font-size: 25px; text-align: center;"></p>
                </td>
            </tr>
        </tbody>
    </table>
</body>

</html>

<script>
    function shortHTML() {
        const htmlCode = document.getElementById("input").value;
        const minifiedHTML = htmlCode.replace(/\s\s+/g, ' ').trim();
        console.log(minifiedHTML);
        document.getElementById("output").value = minifiedHTML;
        document.getElementById("lblKQ").innerHTML = 'DONE: shortHTML';
    }
    function shortJS() {
        const jsCode = document.getElementById("input").value;
        const minifiedJS = jsCode.replace(/\s\s+/g, ' ').trim();
        console.log(minifiedJS);
        document.getElementById("output").value = minifiedJS;
        document.getElementById("lblKQ").innerHTML = 'DONE: shortJS';
    }
    function fullHTML() {
        const htmlCode = document.getElementById("output").value;
        const beautifiedHTML = htmlCode.replace(/>\s+</g, '>\n<').trim();
        console.log(beautifiedHTML);
        document.getElementById("input").value = beautifiedHTML;
        document.getElementById("lblKQ").innerHTML = 'DONE: fullHTML';
    }
    function fullJS() {
        const jsCode = document.getElementById("output").value;
        const beautifiedJS = jsCode.replace(/;\s+/g, ';\n').replace(/{/g, '{\n').replace(/}/g, '}\n').trim();
        console.log(beautifiedJS);
        document.getElementById("input").value = beautifiedJS;
        document.getElementById("lblKQ").innerHTML = 'DONE: fullJS';
    }

    function compressCSS(css) {
        // Xóa các dấu cách dư thừa
        css = css.replace(/\s+/g, ' ');
        // Xóa các dòng trống
        css = css.replace(/\n/g, '');
        // Loại bỏ các dấu chú thích (/* ... */)
        css = css.replace(/\/\*[\s\S]*?\*\//g, '');
        // Xóa khoảng trắng không cần thiết
        css = css.replace(/\s*([\{\}:;,])\s*/g, '$1');
        return css;
    }

    function shortCSS() {
        const cssCodefull = document.getElementById("input").value;
        var compressedCSS = compressCSS(cssCodefull);
        console.log(compressedCSS);
        document.getElementById("output").value = compressedCSS;
        document.getElementById("lblKQ").innerHTML = 'DONE: shortCSS';
    }

    function decompressCSS(compressedCSS) {
        // Thêm dấu cách trước và sau các ký tự quan trọng để tách riêng chúng
        compressedCSS = compressedCSS.replace(/([{}:;,])/g, ' $1 ');
        // Tách các phần tử bằng dấu cách thành mảng
        var cssArray = compressedCSS.split(' ');
        // Xóa các dấu cách dư thừa
        cssArray = cssArray.filter(function (item) {
            return item.trim() !== '';
        });
        // Gộp các phần tử thành một chuỗi CSS
        var decompressedCSS = cssArray.join('');
        return decompressedCSS;
    }

    function fullCSS() {
        var compressedCSS = document.getElementById("output").value;;
        var decompressedCSS = decompressCSS(compressedCSS);
        console.log(decompressedCSS);
        document.getElementById("input").value = decompressedCSS;
        document.getElementById("lblKQ").innerHTML = 'DONE: fullCSS';
    }


</script>